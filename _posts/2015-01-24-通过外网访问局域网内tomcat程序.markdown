---
layout: post
title:  通过外网访问局域网内部部署在tomcat下的web程序
author:	Guo Yonghui
date:   2015-01-24 21:37:00
categories: Tomcat
---
处于同一局域网中的设备之间可以通过局域网中的IP地址来访问部署在tomcat下的web程序，而本文将介绍外网访问局域网内部部署在tomcat下的web程序。

一、获取局域网内IP地址与局域网网关IP地址

局域网内IP地址可以通过在命令行输入ipconfig /all获得，本文测试机局域网内IP地址为192.168.1.202，如下图

![image](http://ccyak.img43.wal8.com/img43/508362_20150124224702/142211253561.png)

局域网网关IP地址可直接通过百度 IP地址 得到，本文测试机局域网网关IP地址为223.246.66.52

二、进行端口映射

tomcat默认端口为8080，但存在8080端口被一些网络运营商禁掉的情况，因此在这里可以将tomcat端口修改为其他端口，打开tomcat/conf/server.xml，将下图位置的8080替换为你想要修改的端口即可，本文测试机将8080端口修改为1121

![image](http://ccyak.img43.wal8.com/img43/508362_20150124224702/142211253725.png)

接下来需要做广域网到局域网的端口映射，在浏览器中输入192.168.1.1并输入相应的用户名密码，进入路由器主界面后点击左侧导航栏的 转发规则-虚拟服务器-添加新条目，服务端口号为在server.xml中修改的端口号（本机为1121），IP地址为电脑在局域网中的IP地址（本机为192.168.1.202），其他均为默认，点击保存

![image](http://ccyak.img43.wal8.com/img43/508362_20150124224702/142211337129.png)

![image](http://ccyak.img43.wal8.com/img43/508362_20150124224702/142211337184.png)

三、外网/局域网访问测试

局域网访问测试

![image](http://ccyak.img43.wal8.com/img43/508362_20150124224702/14221137859.png)

外网访问测试

![image](http://ccyak.img43.wal8.com/img43/508362_20150124224702/14221137868.png)

至此，成功通过外网对局域网内部部署在tomcat下的web程序进行访问。